{% extends "base.html" %}

{% block content_title %}
  {{ rant.title }}
{% endblock content_title %}

{% block content %}
<div class="container col-xl-8 align-self-center">
  <h2>{{ rant.title }}</h2>
  <p>{{ rant.body }}</p>
  Submitted by {% if rant.author %}  {{ rant.author }} {% else %} anonymous {% endif %}
  <hr />
  {% with comments.count as total_comments %}
    <h3>{{ total_comments }} comment {{ total_comments|pluralize }}</h3>
  {% endwith %}

  {% for comment in comments %}
    <div class="comment">
      <p class="info">
        Comment {{ forloop.counter }} by {{ comment.name }} {{ comment.created }}
        {{ comment.body | linebreaks }}
      </p>

    </div>
    {% empty %}
      <p>No Comments yet</p>
  {% endfor %}
  {% if new_comment %}
    <h3>Your comment has been added.</h3>
  {% else %}
    <h3>Add a new comment.</h3>
    <form action="." method=post>
      {% csrf_token %}
      <table>
        <tr>
          {{ comment_form.as_p }}
          <td>&nbsp</td>
          <td><input type="submit" value="Add comment" /></td>
        </tr>
      </table>
    </form>

  {% endif %}
</div>
{% endblock content %}
